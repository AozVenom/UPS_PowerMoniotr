# UPS Monitoring Configuration
# Generated by Ansible on {{ ansible_date_time.iso8601 }}

monitoring:
  interval_seconds: {{ monitoring_interval }}
  data_retention_days: {{ data_retention_days }}
  timestamp: "{{ ansible_date_time.iso8601 }}"

snmp:
  version: "{{ snmp_version }}"
  port: {{ snmp_port }}
  timeout: {{ snmp_timeout }}
  retries: 3

thresholds:
  voltage:
    low: {{ voltage_low_threshold }}
    high: {{ voltage_high_threshold }}
  frequency:
    low: {{ frequency_low_threshold }}
    high: {{ frequency_high_threshold }}
  temperature:
    high: {{ temperature_high_threshold }}

alerting:
  enabled: true
  compensation_events: {{ alert_on_compensation }}
  battery_events: {{ alert_on_battery }}
  load_events: {{ alert_on_high_load }}
  email: {{ alert_email }}

ups_devices:
{% for ups in groups['ups_devices'] %}
  - name: {{ ups }}
    ip: {{ hostvars[ups]['ansible_host'] }}
    model: {{ hostvars[ups]['ups_model'] }}
    location: {{ hostvars[ups]['ups_location'] }}
    capacity_watts: {{ hostvars[ups]['ups_capacity_watts'] }}
    thresholds:
      load_warning: {{ hostvars[ups]['warning_load_threshold'] }}
      load_critical: {{ hostvars[ups]['critical_load_threshold'] }}
{% endfor %}

jfrog:
  enabled: {{ jfrog_enabled | default(false) }}
{% if jfrog_enabled | default(false) %}
  url: {{ jfrog_url }}
  repository: {{ jfrog_repository }}
  username: {{ jfrog_username }}
{% endif %}

generated_by: "Ansible UPS Monitoring System"
ansible_managed: true
